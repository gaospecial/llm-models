# æœ¬åœ°çŸ¥è¯†åº“

ä½¿ç”¨ langchain-chatchat æ„å»ºæœ¬åœ°çŸ¥è¯†åº“ã€‚

-   ä½¿ç”¨çº¿ä¸Šçš„ embeding æ¨¡å‹å’Œ LLMï¼ˆChatGPTï¼‰ã€‚

è¦åœ¨ **Langchain-Chatchat** ä¸­ä½¿ç”¨åœ¨çº¿çš„åµŒå…¥å’ŒChatGPTæœåŠ¡ï¼Œæ‚¨å¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤è¿›è¡Œé…ç½®å’Œå®ç°ï¼š

## å®‰è£…éƒ¨ç½²

### è½¯ç¡¬ä»¶è¦æ±‚

ğŸ’¡ è½¯ä»¶æ–¹é¢ï¼Œæœ¬é¡¹ç›®å·²æ”¯æŒåœ¨ Python 3.8-3.11 ç¯å¢ƒä¸­è¿›è¡Œä½¿ç”¨ï¼Œå¹¶å·²åœ¨ Windowsã€macOSã€Linux æ“ä½œç³»ç»Ÿä¸­è¿›è¡Œæµ‹è¯•ã€‚

ğŸ’» ç¡¬ä»¶æ–¹é¢ï¼Œå›  0.3.0 ç‰ˆæœ¬å·²ä¿®æ”¹ä¸ºæ”¯æŒä¸åŒæ¨¡å‹éƒ¨ç½²æ¡†æ¶æ¥å…¥ï¼Œå› æ­¤å¯åœ¨ CPUã€GPUã€NPUã€MPS ç­‰ä¸åŒç¡¬ä»¶æ¡ä»¶ä¸‹ä½¿ç”¨ã€‚

### å®‰è£…æ­¥éª¤

#### å®‰è£… Langchain-Chatchat

ä» 0.3.0 ç‰ˆæœ¬èµ·ï¼ŒLangchain-Chatchat æä¾›ä»¥ Python åº“å½¢å¼çš„å®‰è£…æ–¹å¼ï¼Œå…·ä½“å®‰è£…è¯·æ‰§è¡Œï¼š

```shell
pip install langchain-chatchat -U
```

#### æ¨¡å‹æ¨ç†æ¡†æ¶å¹¶åŠ è½½æ¨¡å‹

**å¦‚æœä½¿ç”¨åœ¨çº¿æœåŠ¡çš„è¯ï¼Œè¿™ä¸€æ­¥ä¸éœ€è¦åšã€‚**

ä» 0.3.0 ç‰ˆæœ¬èµ·ï¼ŒLangchain-Chatchat ä¸å†æ ¹æ®ç”¨æˆ·è¾“å…¥çš„æœ¬åœ°æ¨¡å‹è·¯å¾„ç›´æ¥è¿›è¡Œæ¨¡å‹åŠ è½½ï¼Œæ¶‰åŠåˆ°çš„æ¨¡å‹ç§ç±»åŒ…æ‹¬
LLMã€Embeddingã€Reranker
åŠåç»­ä¼šæä¾›æ”¯æŒçš„å¤šæ¨¡æ€æ¨¡å‹ç­‰ï¼Œå‡æ”¹ä¸ºæ”¯æŒå¸‚é¢å¸¸è§çš„å„å¤§æ¨¡å‹æ¨ç†æ¡†æ¶æ¥å…¥ï¼Œå¦‚ [Xinference](https://github.com/xorbitsai/inference)ã€[Ollama](https://github.com/ollama/ollama)ã€[LocalAI](https://github.com/mudler/LocalAI)ã€[FastChat](https://github.com/lm-sys/FastChat)ã€[One API](https://github.com/songquanpeng/one-api)
ç­‰ã€‚

å› æ­¤ï¼Œè¯·ç¡®è®¤åœ¨å¯åŠ¨ Langchain-Chatchat é¡¹ç›®å‰ï¼Œé¦–å…ˆè¿›è¡Œæ¨¡å‹æ¨ç†æ¡†æ¶çš„è¿è¡Œï¼Œå¹¶åŠ è½½æ‰€éœ€ä½¿ç”¨çš„æ¨¡å‹ã€‚


### åˆå§‹åŒ–

ä» 0.3.1 ç‰ˆæœ¬èµ·ï¼ŒLangchain-Chatchat ä½¿ç”¨æœ¬åœ° `yaml` æ–‡ä»¶çš„æ–¹å¼è¿›è¡Œé…ç½®ï¼Œç”¨æˆ·å¯ä»¥ç›´æ¥æŸ¥çœ‹å¹¶ä¿®æ”¹å…¶ä¸­çš„å†…å®¹ï¼ŒæœåŠ¡å™¨ä¼šè‡ªåŠ¨æ›´æ–°æ— éœ€é‡å¯ã€‚

#### åˆå§‹åŒ–å·¥ä½œç›®å½•

è®¾ç½® Chatchat å­˜å‚¨é…ç½®æ–‡ä»¶å’Œæ•°æ®æ–‡ä»¶çš„æ ¹ç›®å½•ï¼ˆå¯é€‰ï¼‰

  ```shell
  # on linux or macos
  export CHATCHAT_ROOT=/path/to/chatchat_data
  
  # on windows
  set CHATCHAT_ROOT=/path/to/chatchat_data
  ```

#### æ‰§è¡Œåˆå§‹åŒ–

  ```shell
  chatchat init
  ```

è¯¥å‘½ä»¤ä¼šæ‰§è¡Œä»¥ä¸‹æ“ä½œï¼š

- åˆ›å»ºæ‰€æœ‰éœ€è¦çš„æ•°æ®ç›®å½•
- å¤åˆ¶ samples çŸ¥è¯†åº“å†…å®¹
- ç”Ÿæˆé»˜è®¤ `yaml` é…ç½®æ–‡ä»¶

### é…ç½®æ¨¡å‹å’Œå·¥å…·

ä¿®æ”¹é…ç½®æ–‡ä»¶

#### é…ç½®æ¨¡å‹ï¼ˆmodel_settings.yamlï¼‰  

  å…·ä½“å‚è€ƒ `model_settings.yaml` ä¸­çš„æ³¨é‡Šã€‚ä¸»è¦ä¿®æ”¹ä»¥ä¸‹å†…å®¹ï¼š
  
  ```yaml
  # é»˜è®¤é€‰ç”¨çš„ LLM åç§°
  DEFAULT_LLM_MODEL: "gpt-4o-mini"
  
  # é»˜è®¤é€‰ç”¨çš„ Embedding åç§°
  DEFAULT_EMBEDDING_MODEL: "text-embedding-ada-002"
  
  # # å¹³å°åç§°
  platform_name: chatanywhere
  
  MODEL_PLATFORMS:
    - platform_name: chatanywhere
      platform_type: openai
      api_base_url: https://api.chatanywhere.tech/v1
      api_key: sk-J3LQR******************
      api_proxy: ''
      api_concurrencies: 5
      auto_detect_model: false
      llm_models:
        - gpt-4o-mini
        - gpt-4o-ca
        - gpt-4-ca
      embed_models:
        - text-embedding-3-small
        - text-embedding-3-large
        - text-embedding-ada-002
      text2image_models: []
      image2text_models: []
      rerank_models: []
      speech2text_models: []
      text2speech_models: []
  ```
  
#### é…ç½®çŸ¥è¯†åº“è·¯å¾„ï¼ˆ`basic_settings.yaml`ï¼‰ï¼ˆå¯é€‰ï¼‰  

  é»˜è®¤çŸ¥è¯†åº“ä½äº `CHATCHAT_ROOT/data/knowledge_base`ï¼Œå¦‚æœä½ æƒ³æŠŠçŸ¥è¯†åº“æ”¾åœ¨ä¸åŒçš„ä½ç½®ï¼Œæˆ–è€…æƒ³è¿æ¥ç°æœ‰çš„çŸ¥è¯†åº“ï¼Œå¯ä»¥åœ¨è¿™é‡Œä¿®æ”¹å¯¹åº”ç›®å½•å³å¯ã€‚
  
  ```yaml
  # çŸ¥è¯†åº“é»˜è®¤å­˜å‚¨è·¯å¾„
   KB_ROOT_PATH: D:\chatchat-test\data\knowledge_base

   # æ•°æ®åº“é»˜è®¤å­˜å‚¨è·¯å¾„ã€‚å¦‚æœä½¿ç”¨sqliteï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹DB_ROOT_PATHï¼›å¦‚æœä½¿ç”¨å…¶å®ƒæ•°æ®åº“ï¼Œè¯·ç›´æ¥ä¿®æ”¹SQLALCHEMY_DATABASE_URIã€‚
   DB_ROOT_PATH: D:\chatchat-test\data\knowledge_base\info.db

   # çŸ¥è¯†åº“ä¿¡æ¯æ•°æ®åº“è¿æ¥URI
   SQLALCHEMY_DATABASE_URI: sqlite:///D:\chatchat-test\data\knowledge_base\info.db
  ```
  
#### é…ç½®çŸ¥è¯†åº“ï¼ˆ`kb_settings.yaml`ï¼‰ï¼ˆå¯é€‰ï¼‰

  é»˜è®¤ä½¿ç”¨ `FAISS` çŸ¥è¯†åº“ï¼Œå¦‚æœæƒ³è¿æ¥å…¶å®ƒç±»å‹çš„çŸ¥è¯†åº“ï¼Œå¯ä»¥ä¿®æ”¹ `DEFAULT_VS_TYPE` å’Œ `kbs_config`ã€‚

#### é…ç½®æœç´¢å¼•æ“ï¼ˆ`tool_settings.yml`ï¼‰

  ```yaml
  # æœç´¢å¼•æ“å·¥å…·é…ç½®é¡¹ã€‚æ¨èè‡ªå·±éƒ¨ç½² searx æœç´¢å¼•æ“ï¼Œå›½å†…ä½¿ç”¨æœ€æ–¹ä¾¿ã€‚
  search_internet:
    use: true
    search_engine_name: duckduckgo
    search_engine_config:
      bing:
        bing_search_url: https://api.bing.microsoft.com/v7.0/search
        bing_key: '6f4f35****'
  ```
  
### å¯åŠ¨æœåŠ¡

#### åˆå§‹åŒ–çŸ¥è¯†åº“

è¿è¡Œä¸‹é¢å‘½ä»¤åˆå§‹åŒ–ã€‚

```shell
chatchat kb -r
```

æ›´å¤šåŠŸèƒ½å¯ä»¥æŸ¥çœ‹ `chatchat kb --help`

#### å¯åŠ¨é¡¹ç›®

```shell
chatchat start -a
```

å‡ºç°ç½‘é¡µç•Œé¢å³ä¸ºå¯åŠ¨æˆåŠŸã€‚


